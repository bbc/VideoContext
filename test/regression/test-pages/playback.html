<!DOCTYPE html>
<html lang="en-GB">
    <head>
        <meta charset="utf-8">
        <title>VideoContext Regression Tests â€“ Playback</title>
        <link media="all" rel="stylesheet" href="../assets/shared-styles.css" />
        <script type="text/javascript" src="../../../dist/videocontext.js"></script>
    </head>

    <body>
        <canvas id="canvas"></canvas>
        <div style="margin: 20px auto 0 auto;">
            <button id="play">Play</button>
            <button id="pause">Pause</button>
        </div>

        <script type="text/javascript">
            window.onload = function() {
                var playBtn = document.getElementById("play");
                var pauseBtn = document.getElementById("pause");
                var canvas = document.getElementById("canvas");

                // Create a new VideoContext instance
                window.ctx = new VideoContext(canvas);
                var videoNode = window.ctx.video("../assets/video1.webm");

                videoNode.startAt(0);
                videoNode.connect(window.ctx.destination);

                // pull all of this into a test utility
                playBtn.addEventListener("click", function() {
                    window.ctx.play();
                });

                pauseBtn.addEventListener("click", function() {
                    window.ctx.pause();
                });

                // fire off an event for cypress when playback has started
                window.ctx.registerCallback("update", () => {
                    window.dispatchEvent(new Event("cy:update"))
                })
            };
        </script>
    </body>
</html>
