!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VideoContext=t():e.VideoContext=t()}(window,function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=38)}([function(e,t,r){var o,i,n;i=[t,r(6),r(1)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateablesManager=void 0,e.compileShader=function(e,t,r){var o=e.createShader(r);if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw"could not compile shader:"+e.getShaderInfoLog(o);return o},e.createShaderProgram=function(e,t,r){var o=e.createProgram();if(e.attachShader(o,t),e.attachShader(o,r),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw{error:4,msg:"Can't link shader program for track",toString:function(){return this.msg}};return o},e.createElementTexture=function(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),t},e.updateTexture=function(e,t,r){void 0!==r.readyState&&0===r.readyState||(e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r))},e.clearTexture=function(e,t){e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]))},e.generateRandomId=function(){function e(e){return e[Math.floor(Math.random()*e.length)]}var t=e(["adorable","alert","average","beautiful","blonde","bloody","blushing","bright","clean","clear","cloudy","colourful","concerned","crowded","curious","cute","dark","dirty","drab","distinct","dull","elegant","fancy","filthy","glamorous","gleaming","graceful","grotesque","homely","light","misty","motionless","muddy","plain","poised","quaint","scary","shiny","smoggy","sparkling","spotless","stormy","strange","ugly","unsightly","unusual"])+" "+e(["alive","brainy","broken","busy","careful","cautious","clever","crazy","damaged","dead","difficult","easy","fake","false","famous","forward","fragile","guilty","helpful","helpless","important","impossible","infamous","innocent","inquisitive","mad","modern","open","outgoing","outstanding","poor","powerful","puzzled","real","rich","right","robust","sane","scary","shy","sleepy","stupid","super","tame","thick","tired","wild","wrong"])+" "+e(["manatee","gila monster","nematode","seahorse","slug","koala bear","giant tortoise","garden snail","starfish","sloth","american woodcock","coral","swallowtail butterfly","house sparrow","sea anemone"]);return t=(t=function(e){return e=e.replace(/\b\w/g,function(e){return e.toUpperCase()})}(t)).replace(/ /g,"-")},e.exportToJSON=function(e){return console.warn("VideoContext.exportToJSON has been deprecated. Please use VideoContext.snapshot instead."),JSON.stringify(a(e))},e.snapshot=function(e){return{nodes:a(e),videoContext:function(e){return{currentTime:e.currentTime,duration:e.duration,state:e.state,playbackRate:e.playbackRate}}(e)}},e.createControlFormForNode=function(e,t){var r=document.createElement("div");if(void 0!==t){var o=document.createElement("h2");o.innerHTML=t,r.appendChild(o)}var i=function(t){var o=document.createElement("p"),i=document.createElement("h3");i.innerHTML=t,o.appendChild(i);var n=e._properties[t].value;if("number"==typeof n){var s=document.createElement("input");s.setAttribute("type","range"),s.setAttribute("min","0"),s.setAttribute("max","1"),s.setAttribute("step","0.01"),s.setAttribute("value",n,toString());var u=document.createElement("input");u.setAttribute("type","number"),u.setAttribute("min","0"),u.setAttribute("max","1"),u.setAttribute("step","0.01"),u.setAttribute("value",n,toString());var l=!1;s.onmousedown=function(){l=!0},s.onmouseup=function(){l=!1},s.onmousemove=function(){l&&(e[t]=parseFloat(s.value),u.value=s.value)},s.onchange=function(){e[t]=parseFloat(s.value),u.value=s.value},u.onchange=function(){e[t]=parseFloat(u.value),s.value=u.value},o.appendChild(s),o.appendChild(u)}else if("[object Array]"===Object.prototype.toString.call(n)){var c=function(){var r=document.createElement("input");r.setAttribute("type","range"),r.setAttribute("min","0"),r.setAttribute("max","1"),r.setAttribute("step","0.01"),r.setAttribute("value",n[a],toString());var i=document.createElement("input");i.setAttribute("type","number"),i.setAttribute("min","0"),i.setAttribute("max","1"),i.setAttribute("step","0.01"),i.setAttribute("value",n,toString());var s=a,u=!1;r.onmousedown=function(){u=!0},r.onmouseup=function(){u=!1},r.onmousemove=function(){u&&(e[t][s]=parseFloat(r.value),i.value=r.value)},r.onchange=function(){e[t][s]=parseFloat(r.value),i.value=r.value},i.onchange=function(){e[t][s]=parseFloat(i.value),r.value=i.value},o.appendChild(r),o.appendChild(i)};for(a=0;a<n.length;a++)c()}r.appendChild(o)};for(var n in e._properties){var a;i(n)}return r},e.visualiseVideoContextGraph=function(e,t){var r=t.getContext("2d"),o=t.width,i=t.height;r.clearRect(0,0,o,i);var n=function(e){var t=e.destination,r=new Map;return r.set(t,0),function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=!0,n=!1,a=void 0;try{for(var s,u=t.inputs[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=o+1;r.has(l)?c>r.get(l)&&r.set(l,c):r.set(l,c),e(l,r.get(l))}}catch(e){n=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(n)throw a}}}(t),r}(e),a=n.values(),s=(a=Array.from(a).sort(function(e,t){return t-e}))[0],u=o/(s+1),l=i/e._sourceNodes.length/3,c=1.618*l;function _(e,t,r,o){var i=t.get(e);t.values();var n=0,a=!0,s=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var _=l.value;if(_[0]===e)break;_[1]===i&&(n+=1)}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}return{x:r*t.get(e),y:1.5*o*n+50}}for(var d=0;d<e._renderGraph.connections.length;d++){var p=e._renderGraph.connections[d],f=_(p.source,n,u,l),v=_(p.destination,n,u,l);if(void 0!==f&&void 0!==v){r.beginPath();var h=f.x+c/2,m=f.y+l/2,y=v.x+c/2,g=v.y+l/2,b=y-h,x=g-m,T=Math.PI/2-Math.atan2(b,x),C=Math.sqrt(Math.pow(h-y,2)+Math.pow(m-g,2)),E=Math.min(h,y)+(Math.max(h,y)-Math.min(h,y))/2,O=Math.min(m,g)+(Math.max(m,g)-Math.min(m,g))/2,S=Math.cos(T+Math.PI/2)*C/1.5+E,A=Math.sin(T+Math.PI/2)*C/1.5+O;r.arc(S,A,C/1.2,T-Math.PI+.95,T-.95),r.stroke()}}var w=!0,P=!1,k=void 0;try{for(var N,R=n.keys()[Symbol.iterator]();!(w=(N=R.next()).done);w=!0){var D=N.value,F=_(D,n,u,l),j="#AA9639",U="";"CompositingNode"===D.displayName&&(j="#000000"),"DestinationNode"===D.displayName&&(j="#7D9F35",U="Output"),"VideoNode"===D.displayName&&(j="#572A72",U="Video"),"CanvasNode"===D.displayName&&(j="#572A72",U="Canvas"),"ImageNode"===D.displayName&&(j="#572A72",U="Image"),r.beginPath(),r.fillStyle=j,r.fillRect(F.x,F.y,c,l),r.fill(),r.fillStyle="#000",r.textAlign="center",r.font="10px Arial",r.fillText(U,F.x+c/2,F.y+l/2+2.5),r.fill()}}catch(e){P=!0,k=e}finally{try{!w&&R.return&&R.return()}finally{if(P)throw k}}},e.createSigmaGraphDataFromRenderGraph=function(e){function t(t){if(-1!==e._sourceNodes.indexOf(t)){var r="source "+t.displayName+" "+e._sourceNodes.indexOf(t);return r}var o="processor "+t.displayName+" "+e._processingNodes.indexOf(t);return o}for(var r={nodes:[{id:t(e.destination),label:"Destination Node",x:2.5,y:.5,size:2,node:e.destination}],edges:[]},o=0;o<e._sourceNodes.length;o++){var i=e._sourceNodes[o],n=o*(1/e._sourceNodes.length);r.nodes.push({id:t(i),label:"Source "+o.toString(),x:0,y:n,size:2,color:"#572A72",node:i})}for(var a=0;a<e._processingNodes.length;a++){var s=e._processingNodes[a];r.nodes.push({id:t(s),x:2.5*Math.random(),y:Math.random(),size:2,node:s})}for(var u=0;u<e._renderGraph.connections.length;u++){var l=e._renderGraph.connections[u];r.edges.push({id:"e"+u.toString(),source:t(l.source),target:t(l.destination)})}return r},e.importSimpleEDL=function(e,t){var r=e.compositor(o.default.COMBINE),i=!0,n=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=void 0;if("video"===l.type)c=e.video(l.src,l.sourceStart);else{if("image"!==l.type){console.debug("Clip type "+l.type+" not recognised, skipping.");continue}c=e.image(l.src,l.sourceStart)}c.startAt(l.start),c.stopAt(l.start+l.duration),c.connect(r)}}catch(e){n=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(n)throw a}}return r},e.visualiseVideoContextTimeline=function(e,t,r){var o=t.getContext("2d"),i=t.width,n=t.height,a=n/e._sourceNodes.length,s=e.duration;if(r>s&&!e.endOnLastSourceEnd&&(s=r),e.duration===1/0){for(var u=0,l=0;l<e._sourceNodes.length;l++){var c=e._sourceNodes[l];c._stopTime!==1/0&&(u+=c._stopTime)}s=u>e.currentTime?u+5:e.currentTime+5}var _=i/s,d={video:["#572A72","#3C1255"],image:["#7D9F35","#577714"],canvas:["#AA9639","#806D15"]};o.clearRect(0,0,i,n),o.fillStyle="#999";var p=!0,f=!1,v=void 0;try{for(var h,m=e._processingNodes[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var y=h.value;if("TransitionNode"===y.displayName)for(var g in y._transitions){var b=!0,x=!1,T=void 0;try{for(var C,E=y._transitions[g][Symbol.iterator]();!(b=(C=E.next()).done);b=!0){var O=C.value,S=(O.end-O.start)*_,A=n,w=O.start*_;o.fillStyle="rgba(0,0,0, 0.3)",o.fillRect(w,0,S,A),o.fill()}}catch(e){x=!0,T=e}finally{try{!b&&E.return&&E.return()}finally{if(x)throw T}}}}}catch(e){f=!0,v=e}finally{try{!p&&m.return&&m.return()}finally{if(f)throw v}}for(var P=0;P<e._sourceNodes.length;P++){var k=e._sourceNodes[P],N=k._stopTime-k._startTime;N===1/0&&(N=e.currentTime);var R=k._startTime,D=N*_,F=a,j=R*_,U=a*P;o.fillStyle=d.video[P%d.video.length],o.fillRect(j,U,D,F),o.fill()}void 0!==r&&(o.fillStyle="#000",o.fillRect(r*_,0,1,n))},e.mediaElementHasSource=function(e){var t=e.src,r=e.srcObject;return!((""===t||void 0===t)&&null==r)};var o=function(e){return e&&e.__esModule?e:{default:e}}(t),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=!1;function a(e){function t(e){var t=document.createElement("a");return t.href=e,t.href}function o(e,t){var r=[],o=!0,i=!1,n=void 0;try{for(var a,s=e.inputs[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value;if(void 0!==u){var l=void 0,c=e.inputs.indexOf(u),_=t._processingNodes.indexOf(u);if(_>-1)l="processor"+_;else{var d=t._sourceNodes.indexOf(u);d>-1?l="source"+d:console.log("Warning, can't find input",u)}r.push({id:l,index:c})}}}catch(e){i=!0,n=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw n}}return r}var i={},a=[];for(var s in r.SOURCENODESTATE)a[r.SOURCENODESTATE[s]]=s;for(var u in e._sourceNodes){var l=e._sourceNodes[u],c="source"+u,_="";l._isResponsibleForElementLifeCycle?_=t(l._elementURL):(n||(console.debug("Warning - Trying to export source created from an element not a URL. URL of export will be set to the elements src attribute and may be incorrect",l),n=!0),_=l.element.src);var d={type:l.displayName,url:_,start:l.startTime,stop:l.stopTime,state:a[l.state]};"VideoNode"===d.type&&(d.currentTime=null,l.element&&l.element.currentTime&&(d.currentTime=l.element.currentTime)),l._sourceOffset&&(d.sourceOffset=l._sourceOffset),i[c]=d}for(var p in e._processingNodes){var f=e._processingNodes[p],v="processor"+p,h={type:f.displayName,definition:f._definition,inputs:o(f,e),properties:{}};for(var m in h.definition.properties)h.properties[m]=f[m];"TransitionNode"===h.type&&(h.transitions=f._transitions),i[v]=h}return i.destination={type:"Destination",inputs:o(e.destination,e)},i}e.UpdateablesManager=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._updateables=[],this._useWebworker=!1,this._active=!1,this._previousRAFTime=void 0,this._previousWorkerTime=void 0,this._webWorkerString="            var running = false;            function tick(){                postMessage(Date.now());                if (running){                    setTimeout(tick, 1000/20);                }            }            self.addEventListener('message',function(msg){                var data = msg.data;                if (data === 'start'){                    running = true;                    tick();                }                if (data === 'stop') running = false;            });",this._webWorker=void 0}return i(e,[{key:"_initWebWorker",value:function(){var e=this;window.URL=window.URL||window.webkitURL;var t=new Blob([this._webWorkerString],{type:"application/javascript"});this._webWorker=new Worker(URL.createObjectURL(t)),this._webWorker.onmessage=function(t){var r=t.data;e._updateWorkerTime(r)}}},{key:"_lostVisibility",value:function(){this._previousWorkerTime=Date.now(),this._useWebworker=!0,this._webWorker||this._initWebWorker(),this._webWorker.postMessage("start")}},{key:"_gainedVisibility",value:function(){this._useWebworker=!1,this._previousRAFTime=void 0,this._webWorker&&this._webWorker.postMessage("stop"),requestAnimationFrame(this._updateRAFTime.bind(this))}},{key:"_init",value:function(){var e=this;if(window.Worker){if(void 0===document.hidden)return window.addEventListener("focus",this._gainedVisibility.bind(this)),void window.addEventListener("blur",this._lostVisibility.bind(this));document.addEventListener("visibilitychange",function(){!0===document.hidden?e._lostVisibility():e._gainedVisibility()},!1),requestAnimationFrame(this._updateRAFTime.bind(this))}}},{key:"_updateWorkerTime",value:function(e){var t=(e-this._previousWorkerTime)/1e3;0!==t&&this._update(t),this._previousWorkerTime=e}},{key:"_updateRAFTime",value:function(e){void 0===this._previousRAFTime&&(this._previousRAFTime=e);var t=(e-this._previousRAFTime)/1e3;0!==t&&this._update(t),this._previousRAFTime=e,this._useWebworker||requestAnimationFrame(this._updateRAFTime.bind(this))}},{key:"_update",value:function(e){for(var t=0;t<this._updateables.length;t++)this._updateables[t]._update(parseFloat(e))}},{key:"register",value:function(e){this._updateables.push(e),!1===this._active&&(this._active=!0,this._init())}}]),e}()})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[t,r(0),r(5)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SOURCENODESTATE=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n={waiting:0,sequenced:1,playing:2,paused:3,ended:4,error:5},a=function(e){function r(e,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o,i,[],!0));return s._element=void 0,s._elementURL=void 0,s._isResponsibleForElementLifeCycle=!0,"string"==typeof e||void 0!==window.MediaStream&&e instanceof MediaStream?s._elementURL=e:(s._element=e,s._isResponsibleForElementLifeCycle=!1),s._state=n.waiting,s._currentTime=a,s._startTime=NaN,s._stopTime=1/0,s._ready=!1,s._loadCalled=!1,s._stretchPaused=!1,s._texture=(0,t.createElementTexture)(o),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),s._callbacks=[],s._renderPaused=!1,s._displayName="SourceNode",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),i(r,[{key:"_load",value:function(){this._loadCalled||(this._triggerCallbacks("load"),this._loadCalled=!0)}},{key:"_unload",value:function(){this._triggerCallbacks("destroy"),this._loadCalled=!1}},{key:"registerCallback",value:function(e,t){this._callbacks.push({type:e,func:t})}},{key:"unregisterCallback",value:function(e){var t=[],r=!0,o=!1,i=void 0;try{for(var n,a=this._callbacks[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var s=n.value;void 0===e?t.push(s):s.func===e&&t.push(s)}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}var u=!0,l=!1,c=void 0;try{for(var _,d=t[Symbol.iterator]();!(u=(_=d.next()).done);u=!0){var p=_.value,f=this._callbacks.indexOf(p);this._callbacks.splice(f,1)}}catch(e){l=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw c}}}},{key:"_triggerCallbacks",value:function(e,t){var r=!0,o=!1,i=void 0;try{for(var n,a=this._callbacks[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var s=n.value;s.type===e&&(void 0!==t?s.func(this,t):s.func(this))}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}}},{key:"start",value:function(e){return this._state!==n.waiting?(console.debug("SourceNode is has already been sequenced. Can't sequence twice."),!1):(this._startTime=this._currentTime+e,this._state=n.sequenced,!0)}},{key:"startAt",value:function(e){return this._state!==n.waiting?(console.debug("SourceNode is has already been sequenced. Can't sequence twice."),!1):(this._startTime=e,this._state=n.sequenced,!0)}},{key:"stop",value:function(e){return this._state===n.ended?(console.debug("SourceNode has already ended. Cannot call stop."),!1):this._state===n.waiting?(console.debug("SourceNode must have start called before stop is called"),!1):this._currentTime+e<=this._startTime?(console.debug("SourceNode must have a stop time after it's start time, not before."),!1):(this._stopTime=this._currentTime+e,this._stretchPaused=!1,this._triggerCallbacks("durationchange",this.duration),!0)}},{key:"stopAt",value:function(e){return this._state===n.ended?(console.debug("SourceNode has already ended. Cannot call stop."),!1):this._state===n.waiting?(console.debug("SourceNode must have start called before stop is called"),!1):e<=this._startTime?(console.debug("SourceNode must have a stop time after it's start time, not before."),!1):(this._stopTime=e,this._stretchPaused=!1,this._triggerCallbacks("durationchange",this.duration),!0)}},{key:"_seek",value:function(e){this._renderPaused=!1,this._triggerCallbacks("seek",e),this._state!==n.waiting&&(e<this._startTime&&((0,t.clearTexture)(this._gl,this._texture),this._state=n.sequenced),e>=this._startTime&&this._state!==n.paused&&(this._state=n.playing),e>=this._stopTime&&((0,t.clearTexture)(this._gl,this._texture),this._triggerCallbacks("ended"),this._state=n.ended),this._currentTime=e)}},{key:"_pause",value:function(){(this._state===n.playing||0===this._currentTime&&0===this._startTime)&&(this._triggerCallbacks("pause"),this._state=n.paused,this._renderPaused=!1)}},{key:"_play",value:function(){this._state===n.paused&&(this._triggerCallbacks("play"),this._state=n.playing)}},{key:"_isReady",value:function(){return!this._buffering&&(this._state!==n.playing&&this._state!==n.paused&&this._state!==n.error||this._ready)}},{key:"_update",value:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._rendered=!0;var o=e-this._currentTime;return this._currentTime=e,this._state!==n.waiting&&this._state!==n.ended&&this._state!==n.error&&(this._triggerCallbacks("render",e),e<this._startTime&&((0,t.clearTexture)(this._gl,this._texture),this._state=n.sequenced),e>=this._startTime&&this._state!==n.paused&&this._state!==n.error&&(this._state!==n.playing&&this._triggerCallbacks("play"),this._state=n.playing),e>=this._stopTime&&((0,t.clearTexture)(this._gl,this._texture),this._triggerCallbacks("ended"),this._state=n.ended),void 0===this._element||!1===this._ready||(this._renderPaused||this._state!==n.paused||(r&&(0,t.updateTexture)(this._gl,this._texture,this._element),this._renderPaused=!0),this._state===n.playing&&(r&&(0,t.updateTexture)(this._gl,this._texture,this._element),this._stretchPaused&&(this._stopTime+=o)),!0))}},{key:"clearTimelineState",value:function(){this._startTime=NaN,this._stopTime=1/0,this._state=n.waiting}},{key:"destroy",value:function(){this._unload(),function e(t,r,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0}(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this),this.unregisterCallback(),delete this._element,this._elementURL=void 0,this._state=n.waiting,this._currentTime=0,this._startTime=NaN,this._stopTime=1/0,this._ready=!1,this._loadCalled=!1,this._gl.deleteTexture(this._texture),this._texture=void 0}},{key:"state",get:function(){return this._state}},{key:"element",get:function(){return this._element}},{key:"duration",get:function(){if(!isNaN(this._startTime))return this._stopTime===1/0?1/0:this._stopTime-this._startTime}},{key:"stretchPaused",set:function(e){this._stretchPaused=e},get:function(){return this._stretchPaused}},{key:"startTime",get:function(){return this._startTime}},{key:"stopTime",get:function(){return this._stopTime}}]),r}(o.default);e.SOURCENODESTATE=n,e.default=a})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(5),r(0),r(4)],void 0===(n="function"==typeof(o=function(e,t,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=function(e){function t(e,r,n,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a,s));for(var l in u._vertexShader=(0,o.compileShader)(e,n.vertexShader,e.VERTEX_SHADER),u._fragmentShader=(0,o.compileShader)(e,n.fragmentShader,e.FRAGMENT_SHADER),u._definition=n,u._properties={},n.properties){var c=n.properties[l].value;"[object Array]"===Object.prototype.toString.call(c)&&(c=n.properties[l].value.slice());var _=n.properties[l].type;u._properties[l]={type:_,value:c}}u._inputTextureUnitMapping=[],u._maxTextureUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u._boundTextureUnits=0,u._parameterTextureCount=0,u._inputTextureCount=0,u._texture=(0,o.createElementTexture)(e),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.canvas.width,e.canvas.height,0,e.RGBA,e.UNSIGNED_BYTE,null),u._program=(0,o.createShaderProgram)(e,u._vertexShader,u._fragmentShader),u._framebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,u._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u._texture,0),e.bindFramebuffer(e.FRAMEBUFFER,null);var d=function(e){Object.defineProperty(u,e,{get:function(){return this._properties[e].value},set:function(t){this._properties[e].value=t}})};for(var p in u._properties)d(p);for(var f in u._properties){var v=u._properties[f].value;if(v instanceof Image&&(u._properties[f].texture=(0,o.createElementTexture)(e),u._properties[f].texutreUnit=e.TEXTURE0+u._boundTextureUnits,u._boundTextureUnits+=1,u._parameterTextureCount+=1,u._boundTextureUnits>u._maxTextureUnits))throw new i.RenderException("Trying to bind more than available textures units to shader")}var h=!0,m=!1,y=void 0;try{for(var g,b=n.inputs[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var x=g.value;if(u._inputTextureUnitMapping.push({name:x,textureUnit:e.TEXTURE0+u._boundTextureUnits}),u._boundTextureUnits+=1,u._inputTextureCount+=1,u._boundTextureUnits>u._maxTextureUnits)throw new i.RenderException("Trying to bind more than available textures units to shader")}}catch(e){m=!0,y=e}finally{try{!h&&b.return&&b.return()}finally{if(m)throw y}}for(var T in u._properties)"uniform"===u._properties[T].type&&(u._properties[T].location=u._gl.getUniformLocation(u._program,T));u._currentTimeLocation=u._gl.getUniformLocation(u._program,"currentTime"),u._currentTime=0;var C=e.getAttribLocation(u._program,"a_position"),E=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,E),e.enableVertexAttribArray(C),e.vertexAttribPointer(C,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,1,0,0,1,0,0]),e.STATIC_DRAW);var O=e.getAttribLocation(u._program,"a_texCoord");return e.enableVertexAttribArray(O),e.vertexAttribPointer(O,2,e.FLOAT,!1,0,0),u._displayName="ProcessingNode",u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"setProperty",value:function(e,t){this._properties[e].value=t}},{key:"getProperty",value:function(e){return this._properties[e].value}},{key:"destroy",value:function(){for(var e in function e(t,r,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._properties){var r=this._properties[e].value;r instanceof Image&&(this._gl.deleteTexture(this._properties[e].texture),this._texture=void 0)}this._gl.deleteTexture(this._texture),this._texture=void 0,this._gl.detachShader(this._program,this._vertexShader),this._gl.detachShader(this._program,this._fragmentShader),this._gl.deleteShader(this._vertexShader),this._gl.deleteShader(this._fragmentShader),this._gl.deleteProgram(this._program),this._gl.deleteFramebuffer(this._framebuffer)}},{key:"_update",value:function(e){this._currentTime=e}},{key:"_seek",value:function(e){this._currentTime=e}},{key:"_render",value:function(){this._rendered=!0;var e=this._gl;e.viewport(0,0,e.canvas.width,e.canvas.height),e.useProgram(this._program),e.uniform1f(this._currentTimeLocation,parseFloat(this._currentTime));var t=0;for(var r in this._properties){var i=this._properties[r].value,n=this._properties[r].type,a=this._properties[r].location;if("uniform"===n)if("number"==typeof i)e.uniform1f(a,i);else if("[object Array]"===Object.prototype.toString.call(i))1===i.length?e.uniform1fv(a,i):2===i.length?e.uniform2fv(a,i):3===i.length?e.uniform3fv(a,i):4===i.length?e.uniform4fv(a,i):console.debug("Shader parameter",r,"is too long an array:",i);else if(i instanceof Image){var s=this._properties[r].texture,u=this._properties[r].texutreUnit;(0,o.updateTexture)(e,s,i),e.activeTexture(u),e.uniform1i(a,t),t+=1,e.bindTexture(e.TEXTURE_2D,s)}}}}]),t}(n.default);t.default=s,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(2),r(0)],void 0===(n="function"==typeof(o=function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r),n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e){function t(e,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=(0,o.createElementTexture)(e);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]));var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,i,i.inputs,!0));return a._placeholderTexture=n,a._displayName="EffectNode",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_render",value:function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),function e(t,r,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_render",this).call(this);for(var r=this._renderGraph.getInputsForNode(this),o=0,i=0;i<this._inputTextureUnitMapping.length;i++){var n=this._placeholderTexture,a=this._inputTextureUnitMapping[i].textureUnit,s=this._inputTextureUnitMapping[i].name;i<r.length&&void 0!==r[i]&&(n=r[i]._texture),e.activeTexture(a);var u=e.getUniformLocation(this._program,s);e.uniform1i(u,this._parameterTextureCount+o),o+=1,e.bindTexture(e.TEXTURE_2D,n)}e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,null)}}]),t}(i.default);t.default=a,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[t],void 0===(n="function"==typeof(o=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectException=function(e){this.message=e,this.name="ConnectionException"},e.RenderException=function(e){this.message=e,this.name="RenderException"}})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),o=function(){function e(t,r,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderGraph=r,this._limitConnections=i,this._inputNames=o,this._destroyed=!1,this._gl=t,this._renderGraph=r,this._rendered=!1,this._displayName="GraphNode"}return r(e,[{key:"connect",value:function(e,t){return this._renderGraph.registerConnection(this,e,t)}},{key:"disconnect",value:function(e){var t=this;if(void 0===e){var r=this._renderGraph.getOutputsForNode(this);return r.forEach(function(e){return t._renderGraph.unregisterConnection(t,e)}),r.length>0}return this._renderGraph.unregisterConnection(this,e)}},{key:"destroy",value:function(){this.disconnect();var e=!0,t=!1,r=void 0;try{for(var o,i=this.inputs[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var n=o.value;n.disconnect(this)}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}this._destroyed=!0}},{key:"displayName",get:function(){return this._displayName}},{key:"inputNames",get:function(){return this._inputNames.slice()}},{key:"maximumConnections",get:function(){return!1===this._limitConnections?1/0:this._inputNames.length}},{key:"inputs",get:function(){var e=this._renderGraph.getInputsForNode(this);return e=e.filter(function(e){return void 0!==e})}},{key:"outputs",get:function(){return this._renderGraph.getOutputsForNode(this)}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();t.default=o,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(36),r(35),r(34),r(33),r(32),r(31),r(30),r(29),r(28),r(16),r(26),r(25),r(24),r(23),r(22),r(21),r(20),r(19),r(18),r(17),r(27)],void 0===(n="function"==typeof(o=function(e,t,r,o,i,n,a,s,u,l,c,_,d,p,f,v,h,m,y,g,b,x,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var C=X(r),E=X(o),O=X(i),S=X(n),A=X(a),w=X(s),P=X(u),k=X(l),N=X(c),R=X(_),D=X(d),F=X(p),j=X(f),U=X(v),M=X(h),I=X(m),L=X(y),G=X(g),V=X(b),B=X(x),W=X(T);function X(e){return e&&e.__esModule?e:{default:e}}var Y={AAF_VIDEO_SCALE:C.default,CROSSFADE:E.default,DREAMFADE:V.default,HORIZONTAL_WIPE:O.default,VERTICAL_WIPE:S.default,RANDOM_DISSOLVE:A.default,STATIC_DISSOLVE:L.default,STATIC_EFFECT:G.default,TO_COLOR_AND_BACK:w.default,STAR_WIPE:P.default,COMBINE:k.default,COLORTHRESHOLD:N.default,MONOCHROME:R.default,HORIZONTAL_BLUR:D.default,VERTICAL_BLUR:F.default,AAF_VIDEO_CROP:I.default,AAF_VIDEO_POSITION:M.default,AAF_VIDEO_FLIP:U.default,AAF_VIDEO_FLOP:j.default,OPACITY:B.default,CROP:W.default};t.default=Y,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(1)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=function e(t,r,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0},a=function(e){function t(e,r,o,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:4,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,o,i));return c._preloadTime=s,c._sourceOffset=a,c._globalPlaybackRate=n,c._mediaElementCache=u,c._playbackRate=1,c._playbackRateUpdated=!0,c._attributes=Object.assign({volume:1},l),c._loopElement=!1,c._isElementPlaying=!1,c._attributes.loop&&(c._loopElement=c._attributes.loop),c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"_load",value:function(){var e=this;if(n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_load",this).call(this),void 0===this._element){if(this._isResponsibleForElementLifeCycle)for(var o in this._mediaElementCache?this._element=this._mediaElementCache.get():(this._element=document.createElement(this._elementType),this._element.setAttribute("crossorigin","anonymous"),this._element.setAttribute("webkit-playsinline",""),this._element.setAttribute("playsinline",""),this._playbackRateUpdated=!0),this._element.volume=this._attributes.volume,void 0!==window.MediaStream&&this._elementURL instanceof MediaStream?this._element.srcObject=this._elementURL:this._element.src=this._elementURL,this._attributes)this._element[o]=this._attributes[o];if(this._element){var i=0;this._currentTime>this._startTime&&(i=this._currentTime-this._startTime),this._element.currentTime=this._sourceOffset+i,this._element.onerror=function(){void 0!==e._element&&(console.debug("Error with element",e._element),e._state=r.SOURCENODESTATE.error,e._ready=!0,e._triggerCallbacks("error"))}}else this._state=r.SOURCENODESTATE.error,this._ready=!0,this._triggerCallbacks("error")}else{for(var a in this._attributes)this._element[a]=this._attributes[a];this._element.readyState>3&&!this._element.seeking?(!1===this._loopElement&&(this._stopTime!==1/0&&void 0!=this._stopTime||(this._stopTime=this._startTime+this._element.duration,this._triggerCallbacks("durationchange",this.duration))),!0!==this._ready&&(this._triggerCallbacks("loaded"),this._playbackRateUpdated=!0),this._ready=!0):this._state!==r.SOURCENODESTATE.error&&(this._ready=!1)}}},{key:"_unload",value:function(){if(n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_unload",this).call(this),this._isResponsibleForElementLifeCycle&&void 0!==this._element){for(var e in this._element.removeAttribute("src"),this._element.srcObject=void 0,this._element.load(),this._attributes)this._element.removeAttribute(e);this._element=void 0,this._mediaElementCache||delete this._element}this._ready=!1,this._isElementPlaying=!1}},{key:"_seek",value:function(e){if(n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_seek",this).call(this,e),this.state===r.SOURCENODESTATE.playing||this.state===r.SOURCENODESTATE.paused){void 0===this._element&&this._load();var o=this._currentTime-this._startTime+this._sourceOffset;this._element.currentTime=o,this._ready=!1}this._state!==r.SOURCENODESTATE.sequenced&&this._state!==r.SOURCENODESTATE.ended||void 0===this._element||this._unload()}},{key:"_update",value:function(e){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_update",this).call(this,e,o),void 0!==this._element&&this._element.ended&&(this._state=r.SOURCENODESTATE.ended,this._triggerCallbacks("ended")),this._startTime-this._currentTime<=this._preloadTime&&this._state!==r.SOURCENODESTATE.waiting&&this._state!==r.SOURCENODESTATE.ended&&this._load(),this._state===r.SOURCENODESTATE.playing?(this._playbackRateUpdated&&(this._element.playbackRate=this._globalPlaybackRate*this._playbackRate,this._playbackRateUpdated=!1),this._isElementPlaying||(this._element.play(),this._stretchPaused&&this._element.pause(),this._isElementPlaying=!0),!0):this._state===r.SOURCENODESTATE.paused?(this._element.pause(),this._isElementPlaying=!1,!0):this._state===r.SOURCENODESTATE.ended&&void 0!==this._element?(this._element.pause(),this._isElementPlaying&&this._unload(),!1):void 0}},{key:"clearTimelineState",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clearTimelineState",this).call(this),void 0!==this._element&&(this._element.pause(),this._isElementPlaying=!1),this._unload()}},{key:"destroy",value:function(){this._element&&this._element.pause(),n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"playbackRate",set:function(e){this._playbackRate=e,this._playbackRateUpdated=!0},get:function(){return this._playbackRate}},{key:"stretchPaused",set:function(e){!function e(t,r,o,i){var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);null!==a&&e(a,r,o,i)}else if("value"in n&&n.writable)n.value=o;else{var s=n.set;void 0!==s&&s.call(i,o)}return o}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stretchPaused",e,this),this._element&&(this._stretchPaused?this._element.pause():this._state===r.SOURCENODESTATE.playing&&this._element.play())},get:function(){return this._stretchPaused}},{key:"elementURL",get:function(){return this._elementURL}},{key:"_buffering",get:function(){return!!this._element&&this._element.readyState<HTMLMediaElement.HAVE_FUTURE_DATA}},{key:"volume",set:function(e){this._attributes.volume=e,void 0!==this._element&&(this._element.volume=this._attributes.volume)}}]),t}(o.default);t.default=a,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(2),r(0)],void 0===(n="function"==typeof(o=function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r),n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(e){function t(e,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=(0,o.createElementTexture)(e);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]));var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,i,i.inputs,!1));return a._placeholderTexture=n,a._displayName="CompositingNode",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_render",value:function(){var e=this,r=this._gl;r.bindFramebuffer(r.FRAMEBUFFER,this._framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this._texture,0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA),this.inputs.forEach(function(o){if(void 0!==o){(function e(t,r,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_render",e).call(e);var i=o._texture,n=0,a=!0,s=!1,u=void 0;try{for(var l,c=e._inputTextureUnitMapping[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var _=l.value;r.activeTexture(_.textureUnit);var d=r.getUniformLocation(e._program,_.name);r.uniform1i(d,e._parameterTextureCount+n),n+=1,r.bindTexture(r.TEXTURE_2D,i)}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}r.drawArrays(r.TRIANGLES,0,6)}}),r.bindFramebuffer(r.FRAMEBUFFER,null)}}]),t}(i.default);t.default=a,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(0)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elements=[],this._elementsInitialised=!1;for(var r=0;r<t;r++){var o=this._createElement();this._elements.push(o)}}return o(e,[{key:"_createElement",value:function(){var e=document.createElement("video");return e.setAttribute("crossorigin","anonymous"),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),e}},{key:"init",value:function(){if(!this._elementsInitialised){var e=!0,t=!1,r=void 0;try{for(var o,i=this._elements[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var n=o.value;try{n.play().then(function(){},function(e){if("NotSupportedError"!==e.name)throw e})}catch(e){}}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}this._elementsInitialised=!0}},{key:"get",value:function(){var e=!0,t=!1,o=void 0;try{for(var i,n=this._elements[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;if(!(0,r.mediaElementHasSource)(a))return a}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}console.debug("No available video element in the cache, creating a new one. This may break mobile, make your initial cache larger.");var s=this._createElement();return this._elements.push(s),this._elementsInitialised=!1,s}},{key:"length",get:function(){return this._elements.length}},{key:"unused",get:function(){var e=0,t=!0,o=!1,i=void 0;try{for(var n,a=this._elements[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var s=n.value;(0,r.mediaElementHasSource)(s)||(e+=1)}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}return e}}]),e}();t.default=i,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(4)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.connections=[]}return o(e,[{key:"getOutputsForNode",value:function(e){var t=[];return this.connections.forEach(function(r){r.source===e&&t.push(r.destination)}),t}},{key:"getNamedInputsForNode",value:function(e){var t=[];return this.connections.forEach(function(r){r.destination===e&&"name"===r.type&&t.push(r)}),t}},{key:"getZIndexInputsForNode",value:function(e){var t=[];return this.connections.forEach(function(r){r.destination===e&&"zIndex"===r.type&&t.push(r)}),t.sort(function(e,t){return e.zIndex-t.zIndex}),t}},{key:"getInputsForNode",value:function(e){var t=e.inputNames,r=[],o=this.getNamedInputsForNode(e),i=this.getZIndexInputsForNode(e);if(!0===e._limitConnections){for(var n=0;n<t.length;n++)r[n]=void 0;var a=!0,s=!1,u=void 0;try{for(var l,c=o[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var _=l.value,d=t.indexOf(_.name);r[d]=_.source}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}for(var p=0,f=0;f<r.length;f++)void 0===r[f]&&void 0!==i[p]&&(r[f]=i[p].source,p+=1)}else{var v=!0,h=!1,m=void 0;try{for(var y,g=o[Symbol.iterator]();!(v=(y=g.next()).done);v=!0){var b=y.value;r.push(b.source)}}catch(e){h=!0,m=e}finally{try{!v&&g.return&&g.return()}finally{if(h)throw m}}var x=!0,T=!1,C=void 0;try{for(var E,O=i[Symbol.iterator]();!(x=(E=O.next()).done);x=!0){var S=E.value;r.push(S.source)}}catch(e){T=!0,C=e}finally{try{!x&&O.return&&O.return()}finally{if(T)throw C}}}return r}},{key:"isInputAvailable",value:function(e,t){if(-1===e._inputNames.indexOf(t))return!1;var r=!0,o=!1,i=void 0;try{for(var n,a=this.connections[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var s=n.value;if("name"===s.type&&s.destination===e&&s.name===t)return!1}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return!0}},{key:"registerConnection",value:function(e,t,o){if(t.inputs.length>=t.inputNames.length&&!0===t._limitConnections)throw new r.ConnectException("Node has reached max number of inputs, can't connect");if(!1===t._limitConnections){var i=this.getInputsForNode(t);i.includes(e)&&(console.debug("WARNING - node connected mutliple times, removing previous connection"),this.unregisterConnection(e,t))}if("number"==typeof o)this.connections.push({source:e,type:"zIndex",zIndex:o,destination:t});else if("string"==typeof o&&t._limitConnections){if(!this.isInputAvailable(t,o))throw new r.ConnectException("Port "+o+" is already connected to");this.connections.push({source:e,type:"name",name:o,destination:t})}else{var n=this.getZIndexInputsForNode(t),a=0;n.length>0&&(a=n[n.length-1].zIndex+1),this.connections.push({source:e,type:"zIndex",zIndex:a,destination:t})}return!0}},{key:"unregisterConnection",value:function(e,t){var r=this,o=[];return this.connections.forEach(function(r){r.source===e&&r.destination===t&&o.push(r)}),0!==o.length&&(o.forEach(function(e){var t=r.connections.indexOf(e);r.connections.splice(t,1)}),!0)}}],[{key:"outputEdgesFor",value:function(e,t){var r=[],o=!0,i=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value;u.source===e&&r.push(u)}}catch(e){i=!0,n=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw n}}return r}},{key:"inputEdgesFor",value:function(e,t){var r=[],o=!0,i=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var u=a.value;u.destination===e&&r.push(u)}}catch(e){i=!0,n=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw n}}return r}},{key:"getInputlessNodes",value:function(e){var t=[],r=!0,o=!1,i=void 0;try{for(var n,a=e[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var s=n.value;t.push(s.source)}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}var u=!0,l=!1,c=void 0;try{for(var _,d=e[Symbol.iterator]();!(u=(_=d.next()).done);u=!0){var p=_.value,f=t.indexOf(p.destination);-1!==f&&t.splice(f,1)}}catch(e){l=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw c}}return t}}]),e}();t.default=i,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(3)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=function(e){function t(e,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,o));for(var n in i._transitions={},i._initialPropertyValues={},i._properties)i._initialPropertyValues[n]=i._properties[n].value;return i._displayName="TransitionNode",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"_doesTransitionFitOnTimeline",value:function(e){if(void 0===this._transitions[e.property])return!0;var t=!0,r=!1,o=void 0;try{for(var i,n=this._transitions[e.property][Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var a=i.value;if(e.start>a.start&&e.start<a.end)return!1;if(e.end>a.start&&e.end<a.end)return!1;if(a.start>e.start&&a.start<e.end)return!1;if(a.end>e.start&&a.end<e.end)return!1}}catch(e){r=!0,o=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw o}}return!0}},{key:"_insertTransitionInTimeline",value:function(e){void 0===this._transitions[e.property]&&(this._transitions[e.property]=[]),this._transitions[e.property].push(e),this._transitions[e.property].sort(function(e,t){return e.start-t.start})}},{key:"transition",value:function(e,t,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"mix",n={start:e+this._currentTime,end:t+this._currentTime,current:r,target:o,property:i};return!!this._doesTransitionFitOnTimeline(n)&&(this._insertTransitionInTimeline(n),!0)}},{key:"transitionAt",value:function(e,t,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"mix",n={start:e,end:t,current:r,target:o,property:i};return!!this._doesTransitionFitOnTimeline(n)&&(this._insertTransitionInTimeline(n),!0)}},{key:"clearTransitions",value:function(e){void 0===e?this._transitions={}:this._transitions[e]=[]}},{key:"clearTransition",value:function(e,t){for(var r=void 0,o=0;o<this._transitions[e].length;o++){var i=this._transitions[e][o];t>i.start&&t<i.end&&(r=o)}return void 0!==r&&(this._transitions[e].splice(r,1),!0)}},{key:"_update",value:function(e){for(var r in function e(t,r,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_update",this).call(this,e),this._transitions){var o=this[r];this._transitions[r].length>0&&(o=this._transitions[r][0].current);for(var i=!1,n=0;n<this._transitions[r].length;n++){var a=this._transitions[r][n];if(e>a.end)o=a.target;else if(e>a.start&&e<a.end){var s=a.target-a.current,u=(this._currentTime-a.start)/(a.end-a.start);i=!0,this[r]=a.current+s*u;break}}i||(this[r]=o)}}}]),t}(o.default);t.default=n,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(2)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o={fragmentShader:"            precision mediump float;            uniform sampler2D u_image;            varying vec2 v_texCoord;            varying float v_progress;            void main(){                gl_FragColor = texture2D(u_image, v_texCoord);            }",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",properties:{},inputs:["u_image"]},i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,o,o.inputs,!1));return i._displayName="DestinationNode",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"_render",value:function(){var e=this,r=this._gl;r.bindFramebuffer(r.FRAMEBUFFER,null),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.enable(r.BLEND),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),this.inputs.forEach(function(o){(function e(t,r,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_render",e).call(e);var i=o._texture,n=0,a=!0,s=!1,u=void 0;try{for(var l,c=e._inputTextureUnitMapping[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var _=l.value;r.activeTexture(_.textureUnit);var d=r.getUniformLocation(e._program,_.name);r.uniform1i(d,e._parameterTextureCount+n),n+=1,r.bindTexture(r.TEXTURE_2D,i)}}catch(e){s=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}r.drawArrays(r.TRIANGLES,0,6)})}}]),t}(o.default);t.default=n,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(1)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=function e(t,r,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0},a=function(e){function t(e,r,o,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,o,i));return a._preloadTime=n,a._displayName="CanvasNode",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"_load",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_load",this).call(this),this._ready=!0,this._triggerCallbacks("loaded")}},{key:"_unload",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_unload",this).call(this),this._ready=!1}},{key:"_seek",value:function(e){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_seek",this).call(this,e),this.state!==r.SOURCENODESTATE.playing&&this.state!==r.SOURCENODESTATE.paused||(void 0===this._element&&this._load(),this._ready=!1),this._state!==r.SOURCENODESTATE.sequenced&&this._state!==r.SOURCENODESTATE.ended||void 0===this._element||this._unload()}},{key:"_update",value:function(e){return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_update",this).call(this,e),this._startTime-this._currentTime<=this._preloadTime&&this._state!==r.SOURCENODESTATE.waiting&&this._state!==r.SOURCENODESTATE.ended&&this._load(),this._state===r.SOURCENODESTATE.playing||this._state===r.SOURCENODESTATE.paused||(this._state===r.SOURCENODESTATE.ended&&void 0!==this._element?(this._unload(),!1):void 0)}}]),t}(o.default);t.default=a,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(1)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=function e(t,r,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0},a=function(e){function t(e,r,o,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,o,i));return s._preloadTime=n,s._attributes=a,s._textureUploaded=!1,s._displayName="ImageNode",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"_load",value:function(){var e=this;if(void 0===this._element){if(this._isResponsibleForElementLifeCycle)for(var o in n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_load",this).call(this),this._element=new Image,this._element.setAttribute("crossorigin","anonymous"),this._element.src=this._elementURL,this._element.onload=function(){e._ready=!0,e._triggerCallbacks("loaded")},this._element.onerror=function(){console.error("ImageNode failed to load. url:",e._elementURL)},this._attributes)this._element[o]=this._attributes[o];this._element.onerror=function(){console.debug("Error with element",e._element),e._state=r.SOURCENODESTATE.error,e._ready=!0,e._triggerCallbacks("error")}}else for(var i in this._attributes)this._element[i]=this._attributes[i]}},{key:"_unload",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_unload",this).call(this),this._isResponsibleForElementLifeCycle&&void 0!==this._element&&(this._element.src="",this._element.onerror=void 0,this._element=void 0,delete this._element),this._ready=!1}},{key:"_seek",value:function(e){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_seek",this).call(this,e),this.state!==r.SOURCENODESTATE.playing&&this.state!==r.SOURCENODESTATE.paused||void 0===this._element&&this._load(),this._state!==r.SOURCENODESTATE.sequenced&&this._state!==r.SOURCENODESTATE.ended||void 0===this._element||this._unload()}},{key:"_update",value:function(e){return this._textureUploaded?n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_update",this).call(this,e,!1):n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_update",this).call(this,e),this._startTime-this._currentTime<=this._preloadTime&&this._state!==r.SOURCENODESTATE.waiting&&this._state!==r.SOURCENODESTATE.ended&&this._load(),this._state===r.SOURCENODESTATE.playing||this._state===r.SOURCENODESTATE.paused||(this._state===r.SOURCENODESTATE.ended&&void 0!==this._element?(this._unload(),!1):void 0)}},{key:"elementURL",get:function(){return this._elementURL}}]),t}(o.default);t.default=a,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(7)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._displayName="AudioNode",e._elementType="audio",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"_update",value:function(e){(function e(t,r,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,r,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_update",this).call(this,e,!1)}}]),t}(o.default);t.default=n,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Monochrome",description:"Change images to a single chroma (e.g can be used to make a black & white filter). Input color mix and output color mix can be adjusted.",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image;            uniform vec3 inputMix;            uniform vec3 outputMix;            varying vec2 v_texCoord;            varying float v_mix;            void main(){                vec4 color = texture2D(u_image, v_texCoord);                float mono = color[0]*inputMix[0] + color[1]*inputMix[1] + color[2]*inputMix[2];                color[0] = mono * outputMix[0];                color[1] = mono * outputMix[1];                color[2] = mono * outputMix[2];                gl_FragColor = color;            }",properties:{inputMix:{type:"uniform",value:[.4,.6,.2]},outputMix:{type:"uniform",value:[1,1,1]}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Opacity",description:"Sets the opacity of an input.",vertexShader:"\n    attribute vec2 a_position;\n    attribute vec2 a_texCoord;\n    varying vec2 v_texCoord;\n    void main() {\n        gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n        v_texCoord = a_texCoord;\n    }",fragmentShader:"\n    precision mediump float;\n    uniform sampler2D u_image;\n    uniform float opacity;\n    varying vec2 v_texCoord;\n    varying float v_opacity;\n    void main(){\n        vec4 color = texture2D(u_image, v_texCoord);\n        color[3] *= opacity;\n        gl_FragColor = color;\n    }",properties:{opacity:{type:"uniform",value:.7}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Dream-Fade",description:"A wobbly dream effect. Typically used as a transistion.",vertexShader:"    attribute vec2 a_position;    attribute vec2 a_texCoord;    varying vec2 v_texCoord;    void main() {        gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);        v_texCoord = a_texCoord;    }",fragmentShader:"    precision mediump float;    uniform sampler2D u_image_a;    uniform sampler2D u_image_b;    uniform float mix;    varying vec2 v_texCoord;    varying float v_mix;    void main(){        float wobble = 1.0 - abs((mix*2.0)-1.0);        vec2 pos = vec2(v_texCoord[0] + ((sin(v_texCoord[1]*(10.0*wobble*3.14) + wobble*10.0)/13.0)), v_texCoord[1]);        vec4 color_a = texture2D(u_image_a, pos);        vec4 color_b = texture2D(u_image_b, pos);        color_a[0] *= (1.0 - mix);        color_a[1] *= (1.0 - mix);        color_a[2] *= (1.0 - mix);        color_a[3] *= (1.0 - mix);        color_b[0] *= mix;        color_b[1] *= mix;        color_b[2] *= mix;        color_b[3] *= mix;        gl_FragColor = color_a + color_b;    }",properties:{mix:{type:"uniform",value:0}},inputs:["u_image_a","u_image_b"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Static",description:"A static effect to add pseudo random noise to a video",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image;            uniform float currentTime;            uniform float amount;            varying vec2 v_texCoord;            uniform vec3 weight;            float rand(vec2 co, float currentTime){               return fract(sin(dot(co.xy,vec2(12.9898,78.233))+currentTime) * 43758.5453);            }            void main(){                vec4 color = texture2D(u_image, v_texCoord);                color[0] = color[0] + (2.0*(clamp(rand(v_texCoord, currentTime),  0.01, 1.001)-0.5)) * weight[0] * amount;                color[1] = color[1] + (2.0*(clamp(rand(v_texCoord, currentTime),  0.01, 1.001)-0.5)) * weight[1] * amount;                color[2] = color[2] + (2.0*(clamp(rand(v_texCoord, currentTime),  0.01, 1.001)-0.5)) * weight[2] *amount;                gl_FragColor = color;            }",properties:{weight:{type:"uniform",value:[1,1,1]},amount:{type:"uniform",value:1}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Static Dissolve",description:"A static dissolve effect. Typically used as a transistion.",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image_a;            uniform sampler2D u_image_b;            uniform float mix;            uniform float currentTime;            varying vec2 v_texCoord;            varying float v_mix;            float rand(vec2 co, float currentTime){               return fract(sin(dot(co.xy,vec2(12.9898,78.233))+currentTime) * 43758.5453);            }            void main(){                vec4 color_a = texture2D(u_image_a, v_texCoord);                vec4 color_b = texture2D(u_image_b, v_texCoord);                if (clamp(rand(v_texCoord, currentTime),  0.01, 1.001) > mix){                    gl_FragColor = color_a;                } else {                    gl_FragColor = color_b;                }            }",properties:{mix:{type:"uniform",value:0}},inputs:["u_image_a","u_image_b"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"AAF Video Crop Effect",description:"A crop effect based on the AAF spec.",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image;            uniform float cropLeft;            uniform float cropRight;            uniform float cropTop;            uniform float cropBottom;            varying vec2 v_texCoord;            void main(){                vec4 color = texture2D(u_image, v_texCoord);                if (v_texCoord[0] < (cropLeft+1.0)/2.0) color = vec4(0.0,0.0,0.0,0.0);                if (v_texCoord[0] > (cropRight+1.0)/2.0) color = vec4(0.0,0.0,0.0,0.0);                if (v_texCoord[1] < (-cropBottom+1.0)/2.0) color = vec4(0.0,0.0,0.0,0.0);                if (v_texCoord[1] > (-cropTop+1.0)/2.0) color = vec4(0.0,0.0,0.0,0.0);                gl_FragColor = color;            }",properties:{cropLeft:{type:"uniform",value:-1},cropRight:{type:"uniform",value:1},cropTop:{type:"uniform",value:-1},cropBottom:{type:"uniform",value:1}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"AAF Video Position Effect",description:"A position effect based on the AAF spec.",vertexShader:"        attribute vec2 a_position;        attribute vec2 a_texCoord;        varying vec2 v_texCoord;        void main() {            gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);            v_texCoord = a_texCoord;        }",fragmentShader:"        precision mediump float;        uniform sampler2D u_image;        uniform float positionOffsetX;        uniform float positionOffsetY;        varying vec2 v_texCoord;        varying float v_progress;        void main(){            vec2 pos = vec2(v_texCoord[0] - positionOffsetX/2.0, v_texCoord[1] -  positionOffsetY/2.0);            vec4 color = texture2D(u_image, pos);            if (pos[0] < 0.0 || pos[0] > 1.0 || pos[1] < 0.0 || pos[1] > 1.0){                color = vec4(0.0,0.0,0.0,0.0);            }            gl_FragColor = color;        }",properties:{positionOffsetX:{type:"uniform",value:0},positionOffsetY:{type:"uniform",value:0}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"AAF Video Scale Effect",description:"A flip effect based on the AAF spec. Mirrors the image in the x-axis",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image;            varying vec2 v_texCoord;            void main(){                vec2 coord = vec2(v_texCoord[0] ,1.0 - v_texCoord[1]);                vec4 color = texture2D(u_image, coord);                gl_FragColor = color;            }",properties:{},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"AAF Video Flop Effect",description:"A flop effect based on the AAF spec. Mirrors the image in the y-axis",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image;            varying vec2 v_texCoord;            void main(){                vec2 coord = vec2(1.0 - v_texCoord[0] ,v_texCoord[1]);                vec4 color = texture2D(u_image, coord);                gl_FragColor = color;            }",properties:{},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Vertical Blur",description:"A vertical blur effect. Adpated from http://xissburg.com/faster-gaussian-blur-in-glsl/",vertexShader:"        attribute vec2 a_position;        attribute vec2 a_texCoord;        varying vec2 v_texCoord;        uniform float blurAmount;        varying vec2 v_blurTexCoords[14];        void main() {            gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);            v_texCoord = a_texCoord;            v_blurTexCoords[ 0] = v_texCoord + vec2(0.0,-0.028 * blurAmount);            v_blurTexCoords[ 1] = v_texCoord + vec2(0.0,-0.024 * blurAmount);            v_blurTexCoords[ 2] = v_texCoord + vec2(0.0,-0.020 * blurAmount);            v_blurTexCoords[ 3] = v_texCoord + vec2(0.0,-0.016 * blurAmount);            v_blurTexCoords[ 4] = v_texCoord + vec2(0.0,-0.012 * blurAmount);            v_blurTexCoords[ 5] = v_texCoord + vec2(0.0,-0.008 * blurAmount);            v_blurTexCoords[ 6] = v_texCoord + vec2(0.0,-0.004 * blurAmount);            v_blurTexCoords[ 7] = v_texCoord + vec2(0.0, 0.004 * blurAmount);            v_blurTexCoords[ 8] = v_texCoord + vec2(0.0, 0.008 * blurAmount);            v_blurTexCoords[ 9] = v_texCoord + vec2(0.0, 0.012 * blurAmount);            v_blurTexCoords[10] = v_texCoord + vec2(0.0, 0.016 * blurAmount);            v_blurTexCoords[11] = v_texCoord + vec2(0.0, 0.020 * blurAmount);            v_blurTexCoords[12] = v_texCoord + vec2(0.0, 0.024 * blurAmount);            v_blurTexCoords[13] = v_texCoord + vec2(0.0, 0.028 * blurAmount);        }",fragmentShader:"        precision mediump float;        uniform sampler2D u_image;        varying vec2 v_texCoord;        varying vec2 v_blurTexCoords[14];        void main(){            gl_FragColor = vec4(0.0);            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 0])*0.0044299121055113265;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 1])*0.00895781211794;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 2])*0.0215963866053;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 3])*0.0443683338718;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 4])*0.0776744219933;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 5])*0.115876621105;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 6])*0.147308056121;            gl_FragColor += texture2D(u_image, v_texCoord         )*0.159576912161;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 7])*0.147308056121;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 8])*0.115876621105;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 9])*0.0776744219933;            gl_FragColor += texture2D(u_image, v_blurTexCoords[10])*0.0443683338718;            gl_FragColor += texture2D(u_image, v_blurTexCoords[11])*0.0215963866053;            gl_FragColor += texture2D(u_image, v_blurTexCoords[12])*0.00895781211794;            gl_FragColor += texture2D(u_image, v_blurTexCoords[13])*0.0044299121055113265;        }",properties:{blurAmount:{type:"uniform",value:1}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Horizontal Blur",description:"A horizontal blur effect. Adpated from http://xissburg.com/faster-gaussian-blur-in-glsl/",vertexShader:"        attribute vec2 a_position;        attribute vec2 a_texCoord;        uniform float blurAmount;        varying vec2 v_texCoord;        varying vec2 v_blurTexCoords[14];        void main() {            gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);            v_texCoord = a_texCoord;            v_blurTexCoords[ 0] = v_texCoord + vec2(-0.028 * blurAmount, 0.0);            v_blurTexCoords[ 1] = v_texCoord + vec2(-0.024 * blurAmount, 0.0);            v_blurTexCoords[ 2] = v_texCoord + vec2(-0.020 * blurAmount, 0.0);            v_blurTexCoords[ 3] = v_texCoord + vec2(-0.016 * blurAmount, 0.0);            v_blurTexCoords[ 4] = v_texCoord + vec2(-0.012 * blurAmount, 0.0);            v_blurTexCoords[ 5] = v_texCoord + vec2(-0.008 * blurAmount, 0.0);            v_blurTexCoords[ 6] = v_texCoord + vec2(-0.004 * blurAmount, 0.0);            v_blurTexCoords[ 7] = v_texCoord + vec2( 0.004 * blurAmount, 0.0);            v_blurTexCoords[ 8] = v_texCoord + vec2( 0.008 * blurAmount, 0.0);            v_blurTexCoords[ 9] = v_texCoord + vec2( 0.012 * blurAmount, 0.0);            v_blurTexCoords[10] = v_texCoord + vec2( 0.016 * blurAmount, 0.0);            v_blurTexCoords[11] = v_texCoord + vec2( 0.020 * blurAmount, 0.0);            v_blurTexCoords[12] = v_texCoord + vec2( 0.024 * blurAmount, 0.0);            v_blurTexCoords[13] = v_texCoord + vec2( 0.028 * blurAmount, 0.0);        }",fragmentShader:"        precision mediump float;        uniform sampler2D u_image;        varying vec2 v_texCoord;        varying vec2 v_blurTexCoords[14];        void main(){            gl_FragColor = vec4(0.0);            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 0])*0.0044299121055113265;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 1])*0.00895781211794;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 2])*0.0215963866053;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 3])*0.0443683338718;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 4])*0.0776744219933;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 5])*0.115876621105;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 6])*0.147308056121;            gl_FragColor += texture2D(u_image, v_texCoord         )*0.159576912161;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 7])*0.147308056121;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 8])*0.115876621105;            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 9])*0.0776744219933;            gl_FragColor += texture2D(u_image, v_blurTexCoords[10])*0.0443683338718;            gl_FragColor += texture2D(u_image, v_blurTexCoords[11])*0.0215963866053;            gl_FragColor += texture2D(u_image, v_blurTexCoords[12])*0.00895781211794;            gl_FragColor += texture2D(u_image, v_blurTexCoords[13])*0.0044299121055113265;        }",properties:{blurAmount:{type:"uniform",value:1}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Primer Simple Crop",description:"A simple crop processors for primer",vertexShader:"        attribute vec2 a_position;        attribute vec2 a_texCoord;        varying vec2 v_texCoord;        void main() {            gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);            v_texCoord = a_texCoord;        }",fragmentShader:"        precision mediump float;        uniform sampler2D u_image;        uniform float x;        uniform float y;        uniform float width;        uniform float height;        varying vec2 v_texCoord;        varying float v_progress;        void main(){            vec2 pos = (((v_texCoord)*vec2(width, height)) + vec2(0, 1.0-height)) +vec2(x,-y);            vec4 color = texture2D(u_image, pos);            if (pos[0] < 0.0 || pos[0] > 1.0 || pos[1] < 0.0 || pos[1] > 1.0){                color = vec4(0.0,0.0,0.0,0.0);            }            gl_FragColor = color;        }",properties:{x:{type:"uniform",value:0},y:{type:"uniform",value:0},width:{type:"uniform",value:1},height:{type:"uniform",value:1}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Color Threshold",description:"Turns all pixels with a greater value than the specified threshold transparent.",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image;            uniform float a;            uniform vec3 colorAlphaThreshold;            varying vec2 v_texCoord;            varying float v_mix;            void main(){                vec4 color = texture2D(u_image, v_texCoord);                if (color[0] > colorAlphaThreshold[0] && color[1]> colorAlphaThreshold[1] && color[2]> colorAlphaThreshold[2]){                    color = vec4(0.0,0.0,0.0,0.0);                }                gl_FragColor = color;            }",properties:{a:{type:"uniform",value:0},colorAlphaThreshold:{type:"uniform",value:[0,.55,0]}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Combine",description:"A basic effect which renders the input to the output, Typically used as a combine node for layering up media with alpha transparency.",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image;            uniform float a;            varying vec2 v_texCoord;            varying float v_mix;            void main(){                vec4 color = texture2D(u_image, v_texCoord);                gl_FragColor = color;            }",properties:{a:{type:"uniform",value:0}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Star Wipe Fade",description:"A classic star wipe transistion. Typically used as a transistion.",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image_a;            uniform sampler2D u_image_b;            uniform float mix;            varying vec2 v_texCoord;            varying float v_mix;            float sign (vec2 p1, vec2 p2, vec2 p3){                return (p1[0] - p3[0]) * (p2[1] - p3[1]) - (p2[0] - p3[0]) * (p1[1] - p3[1]);            }            bool pointInTriangle(vec2 pt, vec2 v1, vec2 v2, vec2 v3){                bool b1, b2, b3;                b1 = sign(pt, v1, v2) < 0.0;                b2 = sign(pt, v2, v3) < 0.0;                b3 = sign(pt, v3, v1) < 0.0;                return ((b1 == b2) && (b2 == b3));            }            vec2 rotatePointAboutPoint(vec2 point, vec2 pivot, float angle){                float s = sin(angle);                float c = cos(angle);                float x = point[0] - pivot[0];                float y = point[1] - pivot[1];                float new_x = x * c - y * s;                float new_y = x * s + y * c;                return vec2(new_x + pivot[0], new_y+pivot[1]);            }                        void main(){                vec4 color_a = texture2D(u_image_b, v_texCoord);                vec4 color_b = texture2D(u_image_a, v_texCoord);                vec2 t0_p0,t0_p1,t0_p2,t1_p0,t1_p1,t1_p2,t2_p0,t2_p1,t2_p2,t3_p0,t3_p1,t3_p2;                vec2 t4_p0,t4_p1,t4_p2,t5_p0,t5_p1,t5_p2,t6_p0,t6_p1,t6_p2,t7_p0,t7_p1,t7_p2;                                                t0_p0 = vec2(0.0, 0.25) * clamp(mix,0.0,1.0) * 2.0 + vec2(0.5,0.5);                t0_p1 = vec2(0.0, -0.25) * clamp(mix,0.0,1.0) * 2.0 + vec2(0.5,0.5);                t0_p2 = vec2(1.0, 0.0) * clamp(mix,0.0,1.0) * 2.0 + vec2(0.5,0.5);                                t1_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854);                t1_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854);                t1_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854);                                t2_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 2.0);                t2_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 2.0);                t2_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 2.0);                                t3_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 3.0);                t3_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 3.0);                t3_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 3.0);                                t4_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 4.0);                t4_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 4.0);                t4_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 4.0);                                t5_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 5.0);                t5_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 5.0);                t5_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 5.0);                                t6_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 6.0);                t6_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 6.0);                t6_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 6.0);                                t7_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 7.0);                t7_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 7.0);                t7_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 7.0);                                if(mix > 0.99){                    gl_FragColor = color_a;                    return;                }                if(mix < 0.01){                    gl_FragColor = color_b;                    return;                }                if(pointInTriangle(v_texCoord, t0_p0, t0_p1, t0_p2) || pointInTriangle(v_texCoord, t1_p0, t1_p1, t1_p2) || pointInTriangle(v_texCoord, t2_p0, t2_p1, t2_p2) || pointInTriangle(v_texCoord, t3_p0, t3_p1, t3_p2) || pointInTriangle(v_texCoord, t4_p0, t4_p1, t4_p2) || pointInTriangle(v_texCoord, t5_p0, t5_p1, t5_p2) || pointInTriangle(v_texCoord, t6_p0, t6_p1, t6_p2) || pointInTriangle(v_texCoord, t7_p0, t7_p1, t7_p2)){                    gl_FragColor = color_a;                } else {                    gl_FragColor = color_b;                }            }",properties:{mix:{type:"uniform",value:1}},inputs:["u_image_a","u_image_b"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"To Color And Back Fade",description:"A fade to black and back effect. Setting mix to 0.5 is a fully solid color frame. Typically used as a transistion.",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image_a;            uniform sampler2D u_image_b;            uniform float mix;            uniform vec4 color;            varying vec2 v_texCoord;            varying float v_mix;            void main(){                vec4 color_a = texture2D(u_image_a, v_texCoord);                vec4 color_b = texture2D(u_image_b, v_texCoord);                float mix_amount = (mix *2.0) - 1.0;                if(mix_amount < 0.0){                    gl_FragColor = abs(mix_amount) * color_a + (1.0 - abs(mix_amount)) * color;                } else {                    gl_FragColor = mix_amount * color_b + (1.0 - mix_amount) * color;                }            }",properties:{mix:{type:"uniform",value:0},color:{type:"uniform",value:[0,0,0,0]}},inputs:["u_image_a","u_image_b"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Random Dissolve",description:"A random dissolve effect. Typically used as a transistion.",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image_a;            uniform sampler2D u_image_b;            uniform float mix;            varying vec2 v_texCoord;            varying float v_mix;            float rand(vec2 co){               return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);            }            void main(){                vec4 color_a = texture2D(u_image_a, v_texCoord);                vec4 color_b = texture2D(u_image_b, v_texCoord);                if (clamp(rand(v_texCoord),  0.01, 1.001) > mix){                    gl_FragColor = color_a;                } else {                    gl_FragColor = color_b;                }            }",properties:{mix:{type:"uniform",value:0}},inputs:["u_image_a","u_image_b"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"vertical Wipe",description:"A vertical wipe effect. Typically used as a transistion.",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image_a;            uniform sampler2D u_image_b;            uniform float mix;            varying vec2 v_texCoord;            varying float v_mix;            void main(){                vec4 color_a = texture2D(u_image_a, v_texCoord);                vec4 color_b = texture2D(u_image_b, v_texCoord);                if (v_texCoord[1] > mix){                    gl_FragColor = color_a;                } else {                    gl_FragColor = color_b;                }            }",properties:{mix:{type:"uniform",value:0}},inputs:["u_image_a","u_image_b"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Horizontal Wipe",description:"A horizontal wipe effect. Typically used as a transistion.",vertexShader:"            attribute vec2 a_position;            attribute vec2 a_texCoord;            varying vec2 v_texCoord;            void main() {                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);                v_texCoord = a_texCoord;            }",fragmentShader:"            precision mediump float;            uniform sampler2D u_image_a;            uniform sampler2D u_image_b;            uniform float mix;            varying vec2 v_texCoord;            varying float v_mix;            void main(){                vec4 color_a = texture2D(u_image_a, v_texCoord);                vec4 color_b = texture2D(u_image_b, v_texCoord);                if (v_texCoord[0] > mix){                    gl_FragColor = color_a;                } else {                    gl_FragColor = color_b;                }            }",properties:{mix:{type:"uniform",value:0}},inputs:["u_image_a","u_image_b"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"Cross-Fade",description:"A cross-fade effect. Typically used as a transistion.",vertexShader:"    attribute vec2 a_position;    attribute vec2 a_texCoord;    varying vec2 v_texCoord;    void main() {        gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);        v_texCoord = a_texCoord;    }",fragmentShader:"    precision mediump float;    uniform sampler2D u_image_a;    uniform sampler2D u_image_b;    uniform float mix;    varying vec2 v_texCoord;    varying float v_mix;    void main(){        vec4 color_a = texture2D(u_image_a, v_texCoord);        vec4 color_b = texture2D(u_image_b, v_texCoord);        color_a[0] *= (1.0 - mix);        color_a[1] *= (1.0 - mix);        color_a[2] *= (1.0 - mix);        color_a[3] *= (1.0 - mix);        color_b[0] *= mix;        color_b[1] *= mix;        color_b[2] *= mix;        color_b[3] *= mix;        gl_FragColor = color_a + color_b;    }",properties:{mix:{type:"uniform",value:0}},inputs:["u_image_a","u_image_b"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t],void 0===(n="function"==typeof(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={title:"AAF Video Scale Effect",description:"A scale effect based on the AAF spec.",vertexShader:"        attribute vec2 a_position;        attribute vec2 a_texCoord;        varying vec2 v_texCoord;        void main() {            gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);            v_texCoord = a_texCoord;        }",fragmentShader:"        precision mediump float;        uniform sampler2D u_image;        uniform float scaleX;        uniform float scaleY;        varying vec2 v_texCoord;        varying float v_progress;        void main(){            vec2 pos = vec2(v_texCoord[0]*1.0/scaleX - (1.0/scaleX/2.0 -0.5), v_texCoord[1]*1.0/scaleY - (1.0/scaleY/2.0 -0.5));                vec4 color = texture2D(u_image, pos);                if (pos[0] < 0.0 || pos[0] > 1.0 || pos[1] < 0.0 || pos[1] > 1.0){                    color = vec4(0.0,0.0,0.0,0.0);                }                gl_FragColor = color;            }",properties:{scaleX:{type:"uniform",value:1},scaleY:{type:"uniform",value:1}},inputs:["u_image"]},e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(7)],void 0===(n="function"==typeof(o=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._displayName="VideoNode",e._elementType="video",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(function(e){return e&&e.__esModule?e:{default:e}}(r).default);t.default=o,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)},function(e,t,r){var o,i,n;i=[e,t,r(37),r(15),r(14),r(13),r(1),r(8),r(12),r(3),r(11),r(10),r(9),r(0),r(6)],void 0===(n="function"==typeof(o=function(e,t,r,o,i,n,a,s,u,l,c,_,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v=S(r),h=S(o),m=S(i),y=S(n),g=S(s),b=S(u),x=S(l),T=S(c),C=S(_),E=S(d),O=S(f);function S(e){return e&&e.__esModule?e:{default:e}}var A=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),w=new p.UpdateablesManager,P=function(){function e(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{preserveDrawingBuffer:!0,manualUpdate:!1,endOnLastSourceEnd:!0,useVideoElementCache:!0,videoElementCacheSize:6,webglContextAttributes:{preserveDrawingBuffer:!0,alpha:!1}};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._canvas=t;var i=!1;this.endOnLastSourceEnd=!0;var n={preserveDrawingBuffer:!0,alpha:!1};if("manualUpdate"in o&&(i=o.manualUpdate),"endOnLastSourceEnd"in o&&(this._endOnLastSourceEnd=o.endOnLastSourceEnd),"webglContextAttributes"in o&&(n=o.webglContextAttributes),void 0===n.alpha&&(n.alpha=!1),!0===n.alpha&&console.error("webglContextAttributes.alpha must be false for correct opeation"),this._gl=t.getContext("experimental-webgl",n),null===this._gl)return console.error("Failed to intialise WebGL."),void(r&&r());void 0===o.useVideoElementCache&&(o.useVideoElementCache=!0),this._useVideoElementCache=o.useVideoElementCache,this._useVideoElementCache&&(o.videoElementCacheSize||(o.videoElementCacheSize=5),this._videoElementCache=new E.default(o.videoElementCacheSize)),this._canvas.id&&("string"==typeof this._canvas.id||this._canvas.id instanceof String)&&(this._id=t.id),void 0===this._id&&(this._id=(0,p.generateRandomId)()),void 0===window.__VIDEOCONTEXT_REFS__&&(window.__VIDEOCONTEXT_REFS__={}),window.__VIDEOCONTEXT_REFS__[this._id]=this,this._renderGraph=new C.default,this._sourceNodes=[],this._processingNodes=[],this._timeline=[],this._currentTime=0,this._state=e.STATE.PAUSED,this._playbackRate=1,this._volume=1,this._sourcesPlaying=void 0,this._destinationNode=new b.default(this._gl,this._renderGraph),this._callbacks=new Map,this._callbacks.set("stalled",[]),this._callbacks.set("update",[]),this._callbacks.set("ended",[]),this._callbacks.set("content",[]),this._callbacks.set("nocontent",[]),this._timelineCallbacks=[],i||w.register(this)}return A(e,[{key:"registerTimelineCallback",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._timelineCallbacks.push({time:e,func:t,ordering:r})}},{key:"unregisterTimelineCallback",value:function(e){var t=[],r=!0,o=!1,i=void 0;try{for(var n,a=this._timelineCallbacks[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var s=n.value;s.func===e&&t.push(s)}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}var u=!0,l=!1,c=void 0;try{for(var _,d=t[Symbol.iterator]();!(u=(_=d.next()).done);u=!0){var p=_.value,f=this._timelineCallbacks.indexOf(p);this._timelineCallbacks.splice(f,1)}}catch(e){l=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw c}}}},{key:"registerCallback",value:function(e,t){if(!this._callbacks.has(e))return!1;this._callbacks.get(e).push(t)}},{key:"unregisterCallback",value:function(e){var t=!0,r=!1,o=void 0;try{for(var i,n=this._callbacks.values()[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var a=i.value,s=a.indexOf(e);if(-1!==s)return a.splice(s,1),!0}}catch(e){r=!0,o=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw o}}return!1}},{key:"_callCallbacks",value:function(e){var t=this._callbacks.get(e),r=!0,o=!1,i=void 0;try{for(var n,a=t[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var s=n.value;s(this._currentTime)}}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}}},{key:"play",value:function(){return console.debug("VideoContext - playing"),this._videoElementCache&&this._videoElementCache.init(),this._state=e.STATE.PLAYING,!0}},{key:"pause",value:function(){return console.debug("VideoContext - pausing"),this._state=e.STATE.PAUSED,!0}},{key:"video",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new v.default(e,this._gl,this._renderGraph,this._currentTime,this._playbackRate,t,r,this._videoElementCache,o);return this._sourceNodes.push(i),i}},{key:"audio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new h.default(e,this._gl,this._renderGraph,this._currentTime,this._playbackRate,t,r,this._audioElementCache,o);return this._sourceNodes.push(i),i}},{key:"createVideoSourceNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this._depricate("Warning: createVideoSourceNode will be depricated in v1.0, please switch to using VideoContext.video()"),this.video(e,t,r,o)}},{key:"image",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new m.default(e,this._gl,this._renderGraph,this._currentTime,t,r);return this._sourceNodes.push(o),o}},{key:"createImageSourceNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this._depricate("Warning: createImageSourceNode will be depricated in v1.0, please switch to using VideoContext.image()"),this.image(e,t,r,o)}},{key:"canvas",value:function(e){var t=new y.default(e,this._gl,this._renderGraph,this._currentTime);return this._sourceNodes.push(t),t}},{key:"createCanvasSourceNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return this._depricate("Warning: createCanvasSourceNode will be depricated in v1.0, please switch to using VideoContext.canvas()"),this.canvas(e,t,r)}},{key:"effect",value:function(e){var t=new x.default(this._gl,this._renderGraph,e);return this._processingNodes.push(t),t}},{key:"createEffectNode",value:function(e){return this._depricate("Warning: createEffectNode will be depricated in v1.0, please switch to using VideoContext.effect()"),this.effect(e)}},{key:"compositor",value:function(e){var t=new g.default(this._gl,this._renderGraph,e);return this._processingNodes.push(t),t}},{key:"createCompositingNode",value:function(e){return this._depricate("Warning: createCompositingNode will be depricated in v1.0, please switch to using VideoContext.compositor()"),this.compositor(e)}},{key:"transition",value:function(e){var t=new T.default(this._gl,this._renderGraph,e);return this._processingNodes.push(t),t}},{key:"createTransitionNode",value:function(e){return this._depricate("Warning: createTransitionNode will be depricated in v1.0, please switch to using VideoContext.transition()"),this.transition(e)}},{key:"_isStalled",value:function(){for(var e=0;e<this._sourceNodes.length;e++){var t=this._sourceNodes[e];if(!t._isReady())return!0}return!1}},{key:"update",value:function(e){this._update(e)}},{key:"_update",value:function(t){if(this._sourceNodes=this._sourceNodes.filter(function(e){if(!e.destroyed)return e}),this._processingNodes=this._processingNodes.filter(function(e){if(!e.destroyed)return e}),this._state===e.STATE.PLAYING||this._state===e.STATE.STALLED||this._state===e.STATE.PAUSED){if(this._callCallbacks("update"),this._state!==e.STATE.PAUSED&&(this._isStalled()?(this._callCallbacks("stalled"),this._state=e.STATE.STALLED):this._state=e.STATE.PLAYING),this._state===e.STATE.PLAYING){var r=new Map,o=!0,i=!1,n=void 0;try{for(var s,u=this._timelineCallbacks[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var l=s.value;l.time>=this.currentTime&&l.time<this._currentTime+t*this._playbackRate&&(r.has(l.time)||r.set(l.time,[]),r.get(l.time).push(l))}}catch(e){i=!0,n=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw n}}var c=Array.from(r.keys());c.sort(function(e,t){return e-t});var _=!0,d=!1,p=void 0;try{for(var f,v=c[Symbol.iterator]();!(_=(f=v.next()).done);_=!0){var h=f.value,m=r.get(h);m.sort(function(e,t){return e.ordering-t.ordering});var y=!0,g=!1,b=void 0;try{for(var x,T=m[Symbol.iterator]();!(y=(x=T.next()).done);y=!0){var E=x.value;E.func()}}catch(e){g=!0,b=e}finally{try{!y&&T.return&&T.return()}finally{if(g)throw b}}}}catch(e){d=!0,p=e}finally{try{!_&&v.return&&v.return()}finally{if(d)throw p}}if(this._currentTime+=t*this._playbackRate,this._currentTime>this.duration&&this._endOnLastSourceEnd){for(var O=0;O<this._sourceNodes.length;O++)this._sourceNodes[O]._update(this._currentTime);this._state=e.STATE.ENDED,this._callCallbacks("ended")}}for(var S=!1,A=0;A<this._sourceNodes.length;A++){var w=this._sourceNodes[A];this._state===e.STATE.STALLED&&w._isReady()&&w._state===a.SOURCENODESTATE.playing&&w._pause(),this._state===e.STATE.PAUSED&&w._pause(),this._state===e.STATE.PLAYING&&w._play(),w._update(this._currentTime),w._state!==a.SOURCENODESTATE.paused&&w._state!==a.SOURCENODESTATE.playing||(S=!0)}S!==this._sourcesPlaying&&this._state===e.STATE.PLAYING&&(!0===S?this._callCallbacks("content"):this._callCallbacks("nocontent"),this._sourcesPlaying=S);for(var P=[],k=this._renderGraph.connections.slice(),N=C.default.getInputlessNodes(k);N.length>0;){var R=N.pop();P.push(R);var D=!0,F=!1,j=void 0;try{for(var U,M=C.default.outputEdgesFor(R,k)[Symbol.iterator]();!(D=(U=M.next()).done);D=!0){var I=U.value,L=k.indexOf(I);L>-1&&k.splice(L,1),0===C.default.inputEdgesFor(I.destination,k).length&&N.push(I.destination)}}catch(e){F=!0,j=e}finally{try{!D&&M.return&&M.return()}finally{if(F)throw j}}}var G=!0,V=!1,B=void 0;try{for(var W,X=P[Symbol.iterator]();!(G=(W=X.next()).done);G=!0){var Y=W.value;-1===this._sourceNodes.indexOf(Y)&&(Y._update(this._currentTime),Y._render())}}catch(e){V=!0,B=e}finally{try{!G&&X.return&&X.return()}finally{if(V)throw B}}}}},{key:"reset",value:function(){var t=!0,r=!1,o=void 0;try{for(var i,n=this._callbacks[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var a=i.value;this.unregisterCallback(a)}}catch(e){r=!0,o=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw o}}var s=!0,u=!1,l=void 0;try{for(var c,_=this._sourceNodes[Symbol.iterator]();!(s=(c=_.next()).done);s=!0){var d=c.value;d.destroy()}}catch(e){u=!0,l=e}finally{try{!s&&_.return&&_.return()}finally{if(u)throw l}}var p=!0,f=!1,v=void 0;try{for(var h,m=this._processingNodes[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var y=h.value;y.destroy()}}catch(e){f=!0,v=e}finally{try{!p&&m.return&&m.return()}finally{if(f)throw v}}this._update(0),this._sourceNodes=[],this._processingNodes=[],this._timeline=[],this._currentTime=0,this._state=e.STATE.PAUSED,this._playbackRate=1,this._sourcesPlaying=void 0,this._callbacks.set("stalled",[]),this._callbacks.set("update",[]),this._callbacks.set("ended",[]),this._callbacks.set("content",[]),this._callbacks.set("nocontent",[]),this._timelineCallbacks=[]}},{key:"_depricate",value:function(e){console.log(e)}},{key:"snapshot",value:function(){return(0,p.snapshot)(this)}},{key:"id",get:function(){return this._id},set:function(e){delete window.__VIDEOCONTEXT_REFS__[this._id],void 0!==window.__VIDEOCONTEXT_REFS__[e]&&console.warn("Warning; setting id to that of an existing VideoContext instance."),window.__VIDEOCONTEXT_REFS__[e]=this,this._id=e}},{key:"element",get:function(){return this._canvas}},{key:"state",get:function(){return this._state}},{key:"currentTime",set:function(t){t<this.duration&&this._state===e.STATE.ENDED&&(this._state=e.STATE.PAUSED),("string"==typeof t||t instanceof String)&&(t=parseFloat(t));for(var r=0;r<this._sourceNodes.length;r++)this._sourceNodes[r]._seek(t);for(var o=0;o<this._processingNodes.length;o++)this._processingNodes[o]._seek(t);this._currentTime=t},get:function(){return this._currentTime}},{key:"duration",get:function(){for(var e=0,t=0;t<this._sourceNodes.length;t++)this._sourceNodes[t].state!==a.SOURCENODESTATE.waiting&&this._sourceNodes[t]._stopTime>e&&(e=this._sourceNodes[t]._stopTime);return e}},{key:"destination",get:function(){return this._destinationNode}},{key:"playbackRate",set:function(e){if(e<=0)throw new RangeError("playbackRate must be greater than 0");var t=!0,r=!1,o=void 0;try{for(var i,n=this._sourceNodes[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var a=i.value;"VideoNode"===a.constructor.name&&(a._globalPlaybackRate=e,a._playbackRateUpdated=!0)}}catch(e){r=!0,o=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw o}}this._playbackRate=e},get:function(){return this._playbackRate}},{key:"volume",set:function(e){var t=!0,r=!1,o=void 0;try{for(var i,n=this._sourceNodes[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var a=i.value;(a instanceof v.default||a instanceof h.default)&&(a.volume=e)}}catch(e){r=!0,o=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw o}}this._volume=e},get:function(){return this._volume}}],[{key:"DEFINITIONS",get:function(){return O.default}}]),e}();t.default=P,P.STATE={},P.STATE.PLAYING=0,P.STATE.PAUSED=1,P.STATE.STALLED=2,P.STATE.ENDED=3,P.STATE.BROKEN=4,P.visualiseVideoContextTimeline=p.visualiseVideoContextTimeline,P.visualiseVideoContextGraph=p.visualiseVideoContextGraph,P.createControlFormForNode=p.createControlFormForNode,P.createSigmaGraphDataFromRenderGraph=p.createSigmaGraphDataFromRenderGraph,P.exportToJSON=p.exportToJSON,P.updateablesManager=w,P.importSimpleEDL=p.importSimpleEDL,e.exports=t.default})?o.apply(t,i):o)||(e.exports=n)}])});
//# sourceMappingURL=videocontext.js.map